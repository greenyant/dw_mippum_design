<html ng-app="makingQZ">
<head>
    <meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Mippum Edu</title>
    
    <!--editor : wogud86@gmail.com -->
    
    <!-- Bootstrap -->
	<link href="../css/bootstrap.css" rel="stylesheet">
    <script src="../js/jquery-1.11.3.min.js" type="text/javascript"></script>
	<script src="../js/bootstrap.js" type="text/javascript"></script>
    <script src="../js/angular.js"></script>
    <script src="../js/bootstrap-filestyle.js"></script>
    <script src="../js/download.js"></script>
    
    <link href="css/making_ct.css" rel="stylesheet">

	<style type="text/css">
        .btn-us{
            padding: 0px;
            font-size: 10px;
            line-height: 1;
            border-radius: 0px;
        }
        .dropdown-menu > li > label{
            
            display: block;
            padding: 3px 20px;
            clear: both;
            font-weight: normal;
            line-height: 1.42857143;
            color: #333333;
            white-space: nowrap;
            cursor: pointer;
        }
        .dropdown-menu > li > label:hover,
        .dropdown-menu > li > label:focus {
          text-decoration: none;
          color: #262626;
          background-color: #f5f5f5;
        }
        
        .panel-title > .btns {
            float: right;
        }
        .panel-body textarea {
            border:1px solid #999999;
            width:100%;
            margin:5px 0;
            padding:3px;
        }
        .choices table{
            
            width:100%;
        }
        .choices table tr>td{
            /*border:solid 1px black;*/
            font-size: 14px;
            /*text-align: center;*/
        }
        .choices table td:nth-child(1),
        .choices table td:nth-child(2){
            /*background-color:red;*/
            width:50px;
        }
        .choices table td:nth-child(3) input {
            width:100%;
        }
        
        .well h4{
            color:cadetblue;
        }
        .well label{
            margin-bottom: 0px;
            font-weight:normal;
            cursor: pointer;
        }
    </style>
    <script>
        
        var const_str = {
    		'None':'없음',
            'mark_type_NOOR':"직접입력(무순서)",
            'class_domain':'대단원',
            'class_middle_unit':'중단원',
            'class_cluster':'소단원',
            'class_etc':'직접입력',
            
            'making_cate':'카테고리 만들기',
            'quiz_open_file':'퀴즈 파일 열기',
            'apply':'적용',
            'download':'다운로드',
            'save_as':'변경 내용 저장',
            
            'cagetory_file_name' : '카테고리 파일 이름',
            'number_of_levels':'레벨 수',
            'classification':'분류',
            'mark_type':'부호',
            'add':'추가',
            'modify':'수정',
            'delete':'삭제',
            
            'okay':'확인',
            'delete':'삭제',
            
    	};
        var test_dat;
		var app = angular.module("makingQZ", []);
        
        app.directive('customOnChange', function() {
          return {
            restrict: 'A',
            link: function (scope, element, attrs) {
              var onChangeHandler = scope.$eval(attrs.customOnChange);
              element.bind('change', onChangeHandler);
            }
          };
        });
        
         app.directive('modal', function () {
            return {
              template: '<div class="modal fade">' + 
                  '<div class="modal-dialog">' + 
                    '<div class="modal-content">' + 
                      '<div class="modal-header">' + 
                        '<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>' + 
                        '<h4 class="modal-title">{{ title }}</h4>' + 
                      '</div>' + 
                      '<div class="modal-body" ng-transclude></div>' + 
                    '</div>' + 
                  '</div>' + 
                '</div>',
              restrict: 'E',
              transclude: true,
              replace:true,
              scope:true,
              link: function postLink(scope, element, attrs) {
                attrs.$observe('title', function(){
                    scope.title = attrs.title;
                });
                scope.$watch(attrs.visible, function(value){
                  if(value == true)
                    $(element).modal('show');
                  else
                    $(element).modal('hide');
                });

                $(element).on('shown.bs.modal', function(){
                    //test_dat = attrs;
                  scope.$apply(function(){
                    scope.$parent[attrs.visible] = true;
                  });
                });

                $(element).on('hidden.bs.modal', function(){
                  scope.$apply(function(){
                    scope.$parent[attrs.visible] = false;
                  });
                });
              }
            };
          });
    </script>
    <script src="controllers/MakingQZCtrl.js"></script>
</head>
<body ng-controller="MakingQZCtrl">
<nav class="navbar navbar-inverse">

  <div class="container-fluid">
        <div class="navbar-header">
          
          <a class="navbar-brand" href="#">퀴즈 만들기</a></div>
        <div class="collapse navbar-collapse" id="inverseNavbar1">
                
        </div>
  </div>
</nav>
<div class="container-fluid">
  <div class="row fst-line">
  	<div class="col-md-5 col-sm-4">
        <div class="btn-group">
          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            파일열기 <span class="caret"></span>
          </button>
          <ul class="dropdown-menu">
              <li>
                  <label for="input_mpqz_file">{{ const_str.quiz_open_file }}</label>
              </li>
              <li>
                  <label for="add_mpct_file">카테고리 파일 추가</label>
              </li>
          </ul>
          <div hidden>
            <input id="input_mpqz_file" type="file"
                custom-on-change="open_mpqz_file"  accept=".mpqz" data-input="false"
                data-buttonText="{{ const_str.quiz_open_file }}">
            <input id="add_mpct_file" type="file" class="file filestyle"
                        custom-on-change="open_mpct_file"  accept=".mpct" data-input="false" size="sm"
                        data-buttonText="카테고리 파일 추가">
          </div>
        </div>
  	 	<button class="btn btn-default" ng-click="down_mpct_file()">
            {{ const_str.download }}
        </button>
     </div>
    <div class="col-md-4 col-sm-4 col-xs-7">
     	<!--button class="btn btn-default">{{ const_str.apply }}</button-->
     </div>
     <div class="text-right col-md-3 col-sm-4">
	    <!--button class="btn btn-danger">{{ const_str.save_as }}</button-->
     </div>
  </div>
  <div class="row scnd-line" ng-hide="qz == undefined">
     <div class="col-md-6 col-sm-6 col-xs-6">
     
         <div class="input-group">
          <span class="input-group-addon" id="ct-name-addon">퀴즈 파일 이름</span>
          <input type="text" class="form-control" 
                 id="mpctfile_input" aria-describedby="ct-name-addon" ng-model="qz.name">
        </div>
     </div>
    
  </div>
    
    <div class="well well-sm">
        <div class="row">
            <div class="col-sm-6">

                <h4>
                    도우미
                </h4>
                <div>
                    <a href="#" class="btn btn-default btn-sm">사용방법</a>
                    <a href="#" class="btn btn-default btn-sm">수식 쓰기</a>
                    <a href="#" class="btn btn-default btn-sm">이미지 입력</a>
                </div>
            </div>

            <div class="col-sm-6">
                <h4>
                    카테고리
                    <button class="btn btn-default btn-us"><label for="add_mpct_file">추가</label></button>
                    <a href="/quiz/making_ct.html" target="_blank" class="btn btn-default btn-us">
                        편집기 열기
                    </a>
                    
                </h4>

                <p>
                    <b>추가된 카테고리 : </b><br />
                    <span ng-repeat="ct in qz.ct">
                        {{ct.name}}
                        <button class="btn btn-success btn-us" ng-click="down_mpct_file(ct.order)">
                            다운로드
                        </button>
                        <button class="btn btn-danger btn-us" ng-click="del_ct(ct.order)">삭제</button>
                        <span ng-hide="ct.order == qz.ct.length-1">,</span>
                    </span>
                    
                </p>
                <div>
                    <b>기본 분석 카테고리 : </b><br />
                    <div class="btn-group">
                      <button type="button" class="btn btn-default dropdown-toggle btn-xs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        이름 <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu">
                          
                        <li ng-repeat="ct in qz.ct">
                            <a href="#">
                                {{ct.name}}
                            </a>
                        </li>
                      </ul>
                    </div>
                    <div class="btn-group">
                      <button type="button" class="btn btn-default dropdown-toggle btn-xs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        분류 <span class="caret"></span>
                      </button>
                      <ul class="dropdown-menu">
                        <li ng-repeat="candidate in level_candidates">
                            <a href="#" ng-if="candidate != ct.level_label.length"
                               ng-click="change_depth(candidate)">
                                {{candidate}}
                            </a>
                            <b ng-if="candidate == ct.level_label.length">{{candidate}}</b>
                        </li>
                      </ul>
                    </div>
                </div>
            </div>
            <div class="col-sm-6">
                <h4>
                    객관식 문항 설정
                </h4>
                <div>
                    객관식 번호 유형
                    <select>
                    <option>1.2.3.</option>
                    </select><br />

                    기본 객관식 문항 수
                    <select>
                    <option>4</option></select>
                </div>
            </div>
            <div class="col-sm-6">
                <h4>
                    기타 설정
                </h4>
                <div>
                    수식 사용 : 
                </div>
            </div>
        </div>
    </div>
</div>
    
<div class="container-fluid">
    <h3>문항</h3>
  <div class="row">
      <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
          <div class="panel panel-default">
            <div class="panel-heading" role="tab" id="headingOne">
                <div class="panel-title">
                    <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">
                     1.
                    </a>
                    <div class="btns">
                        적용안됨!!
                        <button class="btn btn-danger btn-xs">삭제</button>
                        <button class="btn btn-default btn-xs">위로</button>    
                        <button class="btn btn-default btn-xs">아래</button>    
                        <a class="btn btn-default btn-xs" role="button" data-toggle="collapse" data-parent="#accordion" href="#collapseOne" aria-expanded="true" aria-controls="collapseOne">닫기</a>
                    </div>
                </div>
                
            </div>
            <div id="collapseOne" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="headingOne">
              <div class="panel-body">
                <div class="col-sm-6 col-md-6">
                    문제 유형 : 
                    <select>
                        <option>단답형</option>
                        <option>에세이</option>
                        <option>숫자</option>
                        <option>객관식</option>
                        <option>OX</option>
                    </select><br />
                    질문 : <br />
                    <textarea width="100%"></textarea><br />
                    <div class="choices">
                        <table class="text-center">
                            <tr>
                                <td>정답</td>
                                <td>번호</td>
                                <td>
                                    <div class="btn-group">
                                      <button type="button" class="btn btn-default dropdown-toggle btn-xs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        보기 수 <span class="caret"></span>
                                      </button>
                                      <ul class="dropdown-menu">
                                        <li>
                                            <a href="#">
                                                2
                                            </a>
                                        </li>
                                      </ul>
                                    </div>
                                    <div class="btn-group">
                                      <button type="button" class="btn btn-default dropdown-toggle btn-xs" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                        한 줄 보기 수 <span class="badge">1</span><span class="caret"></span>
                                      </button>
                                      <ul class="dropdown-menu">
                                        <li>
                                            <a href="#">
                                                1
                                            </a>
                                        </li>
                                      </ul>
                                    </div>
                                </td>
                            </tr>
                            <tr>
                                <td><input type="checkbox" /></td>
                                <td>A.</td>
                                <td><input type="text" /></td>
                            </tr>
                        </table>
                    </div>
                    <div class="answer">
                        답 : 
                        <input type="text" />
                    </div>
                    해설 :<br />
                    <textarea width="100%"></textarea><br />
                    <p> 
                        카테고리 <br />
                        단 원 : <select><option></option></select><br />
                        난이도 : <select><option></option></select>
                    </p>
                </div>
                
                <div class="col-md-6">
                    <button class="btn btn-default">편집 닫기</button>
                    <button class="btn btn-primary">적용</button>
                    <!--button class="btn btn-default">편집 활성화</button-->
                    <div class="preview">
                        
                    </div>
                </div>
              </div>
            </div>
          </div>

        </div>
  </div>
    <button class="btn btn-default">문항 추가</button>
    <h3>참조글</h3>
    <button class="btn btn-default">참조글 추가</button>
    
</div>
<modal title="{{modal_title}}" visible="showModal">
    <!--form role="form" name="form"-->
        <div class="form-group">
            <span class="modal_warning" ng-show="modal_warning_flag">{{modal_warning_msg}}</span>
            <input type="text" class="form-control" ng-hide="modal_warning_flag" 
                   name="text" id="modal_input" ng-model="$parent.modal_input"/>
        </div>
        <div class="text-right">
            <button class="btn" ng-class="{'btn-danger' : modal_warning_flag, 'btn-primary':!modal_warning_flag}" ng-click="submitModal()">{{submit_btn_txt}}</button>
            <button type="cancle" class="btn btn-default" data-dismiss="modal">취소</button>
        </div>
    <!--/form-->
</modal>

</body>


</html>